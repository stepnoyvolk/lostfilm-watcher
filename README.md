# lostfilm-watcher
Hi its my homebew project please do not judge so strictly I realy do not have much time to refactor numerous shitty solutions used in my code. I do not mind if you use my creds for lostfilm thats why i did not remove them from repo.

## Application setup

* clone app
* configure db in /config/database.yml or just setup mysql with root/root passwd
* Install google chrome 61
* run rake tasks: db:create db:migrate serials_db:update
* setup transmission-daemon on this node with rpc and no passwd
* add next environment variables to user which would run the app:
    * RAILS_ENV=production
    * TORRENTS_DATABASE_USER=root #user for apps db
    * TORRENTS_DATABASE_PASSWORD=root #pass for apps db user
    * SECRET_KEY_BASE= #should be generated by executing 'rake secret'
    * PHONE_NUMBER= #your phone number to send sms in format 7xxxxxxxxxx. you should be registrated on sms.ru 
    * TRANSMISSION_IP=127.0.0.1 #ip of machine with transmission daemon (beter be the same)
    * SMS_API_ID= #api id for your user on sms.ru
    * LOSTFILM_RSS_URL=http://old.lostfilm.tv/rssdd.xml #should be ketp as in example
    * MEDIA_TYPE=MP4 #media type to download (avi mp4 mkv)
    * LOSTFILM_UID= #lostfilm uid
    * LOSTFILM_PASS= #lostfilm pass
    * LOSTFILM_USESS= #lostfilm usess
 * To run the app please read articles on installing rails app beyound nginx to use nginx to serve static assets
   

## Tasks wich should be added to cron
* serials_db:update updates list of serials from lostfilm.tv site
* serials_update:update_all watches for new episodes in lostfilm rss for your watched serials
* serials_update:check_for_status runs thrue transmission query to see if serials are downloaded

